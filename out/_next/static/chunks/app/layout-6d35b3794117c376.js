(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1362:(e,t,r)=>{"use strict";r.d(t,{D:()=>c,N:()=>d});var a=r(2115),s=(e,t,r,a,s,l,n,o)=>{let i=document.documentElement,c=["light","dark"];function d(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,a=r&&l?s.map(e=>l[e]||e):s;r?(i.classList.remove(...a),i.classList.add(l&&l[t]?l[t]:t)):i.setAttribute(e,t)}),r=t,o&&c.includes(r)&&(i.style.colorScheme=r)}if(a)d(a);else try{let e=localStorage.getItem(t)||r,a=n&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(a)}catch(e){}},l=["light","dark"],n="(prefers-color-scheme: dark)",o=a.createContext(void 0),i={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=a.useContext(o))?e:i},d=e=>a.useContext(o)?a.createElement(a.Fragment,null,e.children):a.createElement(m,{...e}),h=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:s=!0,enableColorScheme:i=!0,storageKey:c="theme",themes:d=h,defaultTheme:m=s?"system":"light",attribute:p="data-theme",value:f,children:b,nonce:v,scriptProps:k}=e,[w,j]=a.useState(()=>g(c,m)),[N,C]=a.useState(()=>"system"===w?y():w),M=f?Object.values(f):d,L=a.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=y());let a=f?f[t]:t,n=r?x(v):null,o=document.documentElement,c=e=>{"class"===e?(o.classList.remove(...M),a&&o.classList.add(a)):e.startsWith("data-")&&(a?o.setAttribute(e,a):o.removeAttribute(e))};if(Array.isArray(p)?p.forEach(c):c(p),i){let e=l.includes(m)?m:null,r=l.includes(t)?t:e;o.style.colorScheme=r}null==n||n()},[v]),S=a.useCallback(e=>{let t="function"==typeof e?e(w):e;j(t);try{localStorage.setItem(c,t)}catch(e){}},[w]),A=a.useCallback(e=>{C(y(e)),"system"===w&&s&&!t&&L("system")},[w,t]);a.useEffect(()=>{let e=window.matchMedia(n);return e.addListener(A),A(e),()=>e.removeListener(A)},[A]),a.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?j(e.newValue):S(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[S]),a.useEffect(()=>{L(null!=t?t:w)},[t,w]);let E=a.useMemo(()=>({theme:w,setTheme:S,forcedTheme:t,resolvedTheme:"system"===w?N:w,themes:s?[...d,"system"]:d,systemTheme:s?N:void 0}),[w,S,t,N,s,d]);return a.createElement(o.Provider,{value:E},a.createElement(u,{forcedTheme:t,storageKey:c,attribute:p,enableSystem:s,enableColorScheme:i,defaultTheme:m,value:f,themes:d,nonce:v,scriptProps:k}),b)},u=a.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:l,enableSystem:n,enableColorScheme:o,defaultTheme:i,value:c,themes:d,nonce:h,scriptProps:m}=e,u=JSON.stringify([l,r,i,t,d,c,n,o]).slice(1,-1);return a.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(u,")")}})}),g=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},x=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(n)),e.matches?"dark":"light")},1749:(e,t,r)=>{"use strict";r.d(t,{default:()=>H});var a=r(5155),s=r(9015),l=r(2115),n=r(9946);let o=(0,n.A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),i=(0,n.A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var c=r(1007);let d=(0,n.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),h=(0,n.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var m=r(1362),u=r(9434),g=r(6874),x=r.n(g);function y(e){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"transform transition-transform hover:scale-110",...e,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("filter",{id:"glow",children:[(0,a.jsx)("feGaussianBlur",{stdDeviation:"1",result:"blur"}),(0,a.jsx)("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})}),(0,a.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",filter:"url(#glow)",children:[(0,a.jsxs)("path",{strokeDasharray:"36",strokeDashoffset:"36",d:"M13 4l7 0c0.55 0 1 0.45 1 1v14c0 0.55 -0.45 1 -1 1h-7",children:[(0,a.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.6s",values:"36;0"}),(0,a.jsx)("animate",{attributeName:"opacity",dur:"2s",values:"0.4;1;0.4",repeatCount:"indefinite"})]}),(0,a.jsxs)("path",{strokeDasharray:"14",strokeDashoffset:"14",d:"M3 12h11.5",children:[(0,a.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",begin:"0.7s",dur:"0.3s",values:"14;0"}),(0,a.jsx)("animate",{attributeName:"stroke-width",dur:"1.5s",values:"2;3;2",repeatCount:"indefinite"})]}),(0,a.jsxs)("path",{strokeDasharray:"6",strokeDashoffset:"6",d:"M14.5 12l-3.5 -3.5M14.5 12l-3.5 3.5",children:[(0,a.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",begin:"1s",dur:"0.3s",values:"6;0"}),(0,a.jsx)("animate",{attributeName:"opacity",dur:"1.5s",values:"1;0.6;1",repeatCount:"indefinite",begin:"1.3s"})]})]})]})}let p=e=>{let{isOpen:t=!1,className:r}=e,{theme:s,systemTheme:n}=(0,m.D)(),[o,i]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{i(!0)},[]),o)?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6 ".concat(r),fill:"none",stroke:"dark"===("system"===s?n:s)?"white":"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M22 12c0-3.75 0-5.625-.955-6.939a5 5 0 0 0-1.106-1.106C18.625 3 16.749 3 13 3h-2c-3.75 0-5.625 0-6.939.955A5 5 0 0 0 2.955 5.06C2 6.375 2 8.251 2 12s0 5.625.955 6.939a5 5 0 0 0 1.106 1.106C5.375 21 7.251 21 11 21h2c3.75 0 5.625 0 6.939-.955a5 5 0 0 0 1.106-1.106C22 17.625 22 15.749 22 12m-7.5-8.5v17M19 7h-1.5m1.5 4h-1.5"}),(0,a.jsx)("path",{d:"m8 10l1.227 1.057c.515.445.773.667.773.943s-.258.498-.773.943L8 14"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M2 12c0-3.75 0-5.625.955-6.939A5 5 0 0 1 4.06 3.955C5.375 3 7.251 3 11 3h2c3.75 0 5.625 0 6.939.955a5 5 0 0 1 1.106 1.106C22 6.375 22 8.251 22 12s0 5.625-.955 6.939a5 5 0 0 1-1.106 1.106C18.625 21 16.749 21 13 21h-2c-3.75 0-5.625 0-6.939-.955a5 5 0 0 1-1.106-1.106C2 17.625 2 15.749 2 12m7.5-8.5v17M5 7h1.5M5 11h1.5"}),(0,a.jsx)("path",{d:"m17 10l-1.226 1.057c-.516.445-.774.667-.774.943s.258.498.774.943L17 14"})]})}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6 ".concat(r),fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M22 12c0-3.75 0-5.625-.955-6.939a5 5 0 0 0-1.106-1.106C18.625 3 16.749 3 13 3h-2c-3.75 0-5.625 0-6.939.955A5 5 0 0 0 2.955 5.06C2 6.375 2 8.251 2 12s0 5.625.955 6.939a5 5 0 0 0 1.106 1.106C5.375 21 7.251 21 11 21h2c3.75 0 5.625 0 6.939-.955a5 5 0 0 0 1.106-1.106C22 17.625 22 15.749 22 12m-7.5-8.5v17M19 7h-1.5m1.5 4h-1.5"}),(0,a.jsx)("path",{d:"m8 10l1.227 1.057c.515.445.773.667.773.943s-.258.498-.773.943L8 14"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M2 12c0-3.75 0-5.625.955-6.939A5 5 0 0 1 4.06 3.955C5.375 3 7.251 3 11 3h2c3.75 0 5.625 0 6.939.955a5 5 0 0 1 1.106 1.106C22 6.375 22 8.251 22 12s0 5.625-.955 6.939a5 5 0 0 1-1.106 1.106C18.625 21 16.749 21 13 21h-2c-3.75 0-5.625 0-6.939-.955a5 5 0 0 1-1.106-1.106C2 17.625 2 15.749 2 12m7.5-8.5v17M5 7h1.5M5 11h1.5"}),(0,a.jsx)("path",{d:"m17 10l-1.226 1.057c-.516.445-.774.667-.774.943s.258.498.774.943L17 14"})]})})};var f=r(5695),b=r(4568),v=r(6766);let k=e=>{let{className:t}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 48 48",className:t,children:(0,a.jsxs)("g",{fill:"none",children:[(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M12 8c-3.052 4.517-5.987 5.81-8 5c.543 1.833 4.443 4.375 6.927 5.838c1.07.63 1.383 2.065.638 3.059C10.202 23.717 8.315 26.289 8 27C.954 39.79 16.482 44.648 24 44c22.144-1.908 21.355-19.197 18-26c-8.052 13.994-20.481 5.915-20 3s3.792-2.335 5-7C29.013 4.768 16.374.399 12 8"}),(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M19 31c2.5 3.5 10 7 16 2"}),(0,a.jsx)("circle",{cx:"17",cy:"12",r:"2",fill:"currentColor"})]})})},w=e=>{let{isSidebarOpen:t,onToggleSidebar:r}=e,{theme:s,setTheme:n}=(0,m.D)(),[g,w]=(0,l.useState)(!1),[j,N]=(0,l.useState)(!1),C=(0,f.useRouter)(),{user:M,loading:L,logout:S}=(0,b.A)(),A=()=>{r(),w(!g)},E=async()=>{try{await S(),C.push("/login")}catch(e){console.error("登出失敗:",e)}};return L?(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 h-20 border-b border-gray-200 bg-white/80 backdrop-blur-sm dark:border-gray-700 dark:bg-gray-900/80",children:(0,a.jsxs)("div",{className:"flex h-full items-center justify-between px-4 lg:px-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:A,className:(0,u.cn)("flex h-10 w-10 items-center justify-center rounded-lg text-gray-600 transition-colors",g?"bg-gray-100 dark:bg-gray-800":"hover:bg-gray-100 dark:hover:bg-gray-800"),"aria-label":"切換側邊欄",children:(0,a.jsx)(p,{isOpen:t,className:"h-5 w-5"})}),(0,a.jsxs)(x(),{href:"/",className:"flex items-center gap-2 text-xl lg:text-2xl font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[(0,a.jsx)(k,{className:"h-8 w-8 lg:h-9 lg:w-9"}),(0,a.jsx)("span",{children:"EchoMind"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("div",{className:"animate-pulse h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700"})})]})}):(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 h-20 border-b border-gray-200 bg-white/80 backdrop-blur-sm dark:border-gray-700 dark:bg-gray-900/80",children:(0,a.jsxs)("div",{className:"flex h-full items-center justify-between px-4 lg:px-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:A,className:(0,u.cn)("flex h-10 w-10 items-center justify-center rounded-lg text-gray-600 transition-colors",g?"bg-gray-100 dark:bg-gray-800":"hover:bg-gray-100 dark:hover:bg-gray-800"),"aria-label":"切換側邊欄",children:(0,a.jsx)(p,{isOpen:t,className:"h-5 w-5"})}),(0,a.jsxs)(x(),{href:"/",className:"flex items-center gap-2 text-xl lg:text-2xl font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[(0,a.jsx)(k,{className:"h-8 w-8 lg:h-9 lg:w-9"}),(0,a.jsx)("span",{children:"EchoMind"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>n("dark"===s?"light":"dark"),className:"flex h-10 w-10 items-center justify-center rounded-lg text-gray-600 transition-colors hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",children:[(0,a.jsx)(o,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(i,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),M?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>N(!j),className:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-full border-2 border-gray-200 hover:border-blue-500 dark:border-gray-700 dark:hover:border-blue-400",children:M.photoURL?(0,a.jsx)(v.default,{src:M.photoURL,alt:M.displayName||"用戶頭像",width:32,height:32,className:"h-full w-full object-cover"}):(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-300",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"h-6 w-6",children:(0,a.jsx)("path",{fill:"currentColor",d:"M13 3c3.88 0 7 3.14 7 7c0 2.8-1.63 5.19-4 6.31V21H9v-3H8c-1.11 0-2-.89-2-2v-3H4.5c-.42 0-.66-.5-.42-.81L6 9.66A7.003 7.003 0 0 1 13 3m0-2C8.41 1 4.61 4.42 4.06 8.9L2.5 11h-.03l-.02.03c-.55.76-.62 1.76-.19 2.59c.36.69 1 1.17 1.74 1.32V16c0 1.85 1.28 3.42 3 3.87V23h11v-5.5c2.5-1.67 4-4.44 4-7.5c0-4.97-4.04-9-9-9m4.33 8.3l-1.96.51l1.44 1.46c.35.34.35.92 0 1.27s-.93.35-1.27 0l-1.45-1.44l-.52 1.96c-.12.49-.61.76-1.07.64a.91.91 0 0 1-.66-1.11l.53-1.96l-1.96.53a.91.91 0 0 1-1.11-.66c-.12-.45.16-.95.64-1.07l1.96-.52l-1.44-1.45a.9.9 0 0 1 1.27-1.27l1.46 1.44l.51-1.96c.12-.49.62-.77 1.09-.64c.49.13.77.62.64 1.1L14.9 8.1l1.97-.53c.48-.13.97.15 1.1.64c.13.47-.15.97-.64 1.09"})})})}),j&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 rounded-lg border border-gray-200 bg-white py-2 shadow-lg dark:border-gray-700 dark:bg-gray-800",children:[(0,a.jsxs)("div",{className:"px-4 py-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.displayName||"用戶"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:M.email})]}),(0,a.jsx)("div",{className:"h-px bg-gray-200 dark:bg-gray-700"}),(0,a.jsxs)("button",{onClick:()=>{N(!1),C.push("/profile")},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"個人資料"]}),(0,a.jsxs)("button",{onClick:()=>{N(!1),C.push("/settings")},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,a.jsx)(d,{className:"h-4 w-4"}),"設定"]}),(0,a.jsx)("div",{className:"h-px bg-gray-200 dark:bg-gray-700"}),(0,a.jsxs)("button",{onClick:()=>{N(!1),E()},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:text-red-400 dark:hover:bg-gray-700",children:[(0,a.jsx)(h,{className:"h-4 w-4"}),"登出"]})]})]}):(0,a.jsxs)(x(),{href:"/login",className:(0,u.cn)("flex items-center gap-2","px-4 py-2 lg:px-6 lg:py-2.5","bg-gradient-to-r from-amber-500 via-orange-500 to-rose-500","hover:from-amber-600 hover:via-orange-600 hover:to-rose-600","dark:from-amber-400 dark:via-orange-400 dark:to-rose-400","dark:hover:from-amber-500 dark:hover:via-orange-500 dark:hover:to-rose-500","text-white rounded-lg","transition-all duration-300 ease-in-out","transform hover:scale-105 active:scale-95","shadow-md hover:shadow-lg","hover:shadow-orange-500/20 dark:hover:shadow-orange-400/20"),children:[(0,a.jsx)(y,{className:"h-5 w-5 lg:h-6 lg:w-6"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium",children:"登入"})]})]})]})})},j=(0,n.A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),N=(0,n.A)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),C=(0,n.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),M=(0,n.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),L=[{id:1,title:"關於 AI 的討論",time:"3 小時前"},{id:2,title:"如何學習程式設計",time:"昨天"},{id:3,title:"探討未來科技趨勢",time:"2 天前"}],S=[{icon:()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"h-6 w-6",children:(0,a.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 12h3m3 0h-3m0 0V9m0 3v3m0 7c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12c0 1.821.487 3.53 1.338 5L2.5 21.5l4.5-.838A9.96 9.96 0 0 0 12 22"})}),label:"開啟新對話",href:"/"},{icon:()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"h-6 w-6",children:[(0,a.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M22 12c0-5.523-4.477-10-10-10a9.97 9.97 0 0 0-7 2.859V3.75a.75.75 0 0 0-1.5 0v3.5c0 .414.336.75.75.75h3.5a.75.75 0 0 0 0-1.5H5.519a8.5 8.5 0 1 1 2.348 12.93l-.27-.15l-3.986 1.111l1.113-3.984l-.151-.27A8.46 8.46 0 0 1 3.5 12c0-.675.079-1.332.227-1.962c.08-.301.065-.888-.536-1.02c-.613-.134-.87.355-.935.719h.001A10 10 0 0 0 2 12a9.96 9.96 0 0 0 1.115 4.592l-1.068 3.823a1.25 1.25 0 0 0 1.54 1.54l3.826-1.067A9.96 9.96 0 0 0 12 22c5.523 0 10-4.477 10-10"}),(0,a.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M11.25 8a.75.75 0 0 0-.75.75v4.5c0 .414.336.75.75.75h3a.75.75 0 0 0 0-1.5H12V8.75a.75.75 0 0 0-.75-.75"})]}),label:"聊天歷史",href:"#"},{icon:j,label:"匿名留言板",href:"#"},{icon:()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",viewBox:"0 0 20 20",className:"h-6 w-6",children:(0,a.jsx)("path",{fill:"currentColor",d:"M7.5 4a5.5 5.5 0 1 0 0 11h5a5.5 5.5 0 1 0 0-11zM6 7.5a.5.5 0 0 1 1 0V9h1.5a.5.5 0 0 1 0 1H7v1.5a.5.5 0 0 1-1 0V10H4.5a.5.5 0 0 1 0-1H6zm9 .5a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-3 4a1 1 0 1 1 0-2a1 1 0 0 1 0 2"})}),label:"小遊戲",href:"#"}],A=[{icon:N,label:"幫助",href:"#"},{icon:d,label:"設定",href:"#"}],E=e=>{let{isOpen:t,onClose:r}=e,s=(0,f.usePathname)(),n=e=>{let{item:r}=e,n=r.icon,o=s===r.href;return(0,a.jsxs)(x(),{href:r.href,className:(0,u.cn)("flex items-center gap-3 rounded-lg px-3 py-2 transition-all",o&&"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-50",!o&&"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-50"),children:["function"==typeof n?(0,a.jsx)(n,{className:"h-6 w-6"}):l.createElement(n,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:(0,u.cn)("font-medium transition-all duration-300",!t&&"lg:hidden"),children:r.label})]})};return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:r}),(0,a.jsxs)("aside",{className:(0,u.cn)("fixed top-20 bottom-0 left-0 z-50","w-64 bg-white dark:bg-gray-900","border-r border-gray-200 dark:border-gray-700","transition-all duration-300 ease-in-out","flex flex-col",t?"translate-x-0":"-translate-x-full lg:translate-x-0",!t&&"lg:w-20"),children:[(0,a.jsx)("button",{onClick:r,className:"absolute right-4 top-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 lg:hidden",children:(0,a.jsx)(C,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),(0,a.jsxs)("nav",{className:"flex-1 space-y-6 p-4 overflow-y-auto",children:[(0,a.jsx)("div",{className:"space-y-1",children:S.map(e=>(0,a.jsx)(n,{item:e},e.href))}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),(0,a.jsxs)("div",{className:(0,u.cn)("space-y-2",!t&&"lg:hidden"),children:[(0,a.jsx)("div",{className:"flex items-center justify-between px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(M,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"最近對話"})]})}),(0,a.jsx)("div",{className:"space-y-1",children:L.map(e=>(0,a.jsxs)(x(),{href:"#",className:"flex flex-col px-4 py-2 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.time})]},e.id))})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 space-y-1",children:A.map(e=>(0,a.jsx)(n,{item:e},e.href))})]})]})};function T(e){let{children:t}=e,[r,s]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{window.innerWidth>=1024&&s(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[(0,a.jsx)(w,{onToggleSidebar:()=>s(!r),isSidebarOpen:r}),(0,a.jsx)(E,{isOpen:r,onClose:()=>s(!1)}),(0,a.jsx)("main",{className:(0,u.cn)("pt-20 transition-all duration-300",r?"lg:pl-64":"lg:pl-20"),children:t})]})}var P=r(6671),z=r(7161);function H(e){let{children:t}=e;return(0,l.useEffect)(()=>{let e=(0,z.Ph)(e=>{console.log("認證狀態更新:",e?"已登入":"未登入")});return()=>{e&&e()}},[]),(0,a.jsx)(s.ThemeProvider,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:(0,a.jsxs)(b.AuthProvider,{children:[(0,a.jsx)(T,{children:t}),(0,a.jsx)(P.Toaster,{richColors:!0,position:"top-right"})," "]})})}},4568:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>g,A:()=>u});var a=r(5155),s=r(2115),l=r(6203),n=r(6104);let o=()=>{let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!0),[o,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=(0,l.hg)(n.j,async e=>{if(e)try{await e.reload(),t(e)}catch(e){console.error("重新載入用戶資料失敗:",e),i(e)}else t(null);a(!1)},e=>{console.error("認證狀態監聽錯誤:",e),i(e),a(!1)});return()=>e()},[]),{user:e,loading:r,error:o}};var i=r(6671);let c=()=>{let e=async e=>{try{await (0,l.oM)(n.j,e?l.F0:l.iM)}catch(e){throw console.error("設定持久化失敗:",e),e}};return{registerWithEmail:async t=>{let{email:r,password:a,name:s}=t;try{await e(!0);let t=await (0,l.eJ)(n.j,r,a);return await (0,l.r7)(t.user,{displayName:s}),i.o.success("註冊成功！",{description:"歡迎加入 EchoMind",duration:3e3}),t.user}catch(e){throw d(e),e}},loginWithEmail:async t=>{let{email:r,password:a,rememberMe:s=!1}=t;try{await e(s);let t=await (0,l.x9)(n.j,r,a);return i.o.success("登入成功！",{description:"歡迎回來",duration:3e3}),t.user}catch(e){throw d(e),e}},loginWithGoogle:async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{await e(t);let r=new l.HF;r.setCustomParameters({prompt:"select_account"});let a=await (0,l.df)(n.j,r);return i.o.success("Google 登入成功！",{description:"歡迎回來",duration:3e3}),a.user}catch(e){throw d(e),e}},logout:async()=>{try{await (0,l.CI)(n.j),i.o.success("登出成功！",{description:"期待您的再次使用",duration:3e3})}catch(e){throw d(e),e}}}},d=e=>{let t=h(e.code);console.error("認證錯誤:",e),i.o.error("操作失敗",{description:t,duration:3e3})},h=e=>({"auth/email-already-in-use":"此電子郵件已被註冊","auth/invalid-email":"無效的電子郵件格式","auth/operation-not-allowed":"此登入方式未啟用","auth/weak-password":"密碼強度不足","auth/user-disabled":"此帳號已被停用","auth/user-not-found":"找不到此用戶","auth/wrong-password":"密碼錯誤","auth/popup-closed-by-user":"登入視窗被關閉","auth/popup-blocked":"登入視窗被阻擋","auth/cancelled-popup-request":"登入請求已取消","auth/network-request-failed":"網路連線失敗","auth/too-many-requests":"登入嘗試次數過多，請稍後再試","auth/requires-recent-login":"請重新登入以繼續操作","auth/account-exists-with-different-credential":"此電子郵件已使用其他登入方式註冊"})[e]||"發生未知錯誤，請稍後再試",m=(0,s.createContext)(null),u=()=>{let e=(0,s.useContext)(m);if(!e)throw Error("useAuth 必須在 AuthProvider 內使用");return e},g=e=>{let{children:t}=e,{user:r,loading:s,error:l}=o(),{registerWithEmail:n,loginWithEmail:i,loginWithGoogle:d,logout:h}=c();return s?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gray-900 dark:border-white"})}):(0,a.jsx)(m.Provider,{value:{user:r,loading:s,error:l,registerWithEmail:n,loginWithEmail:i,loginWithGoogle:d,logout:h},children:t})}},5356:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},6104:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var a=r(3915),s=r(6203),l=r(5317);let n=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)({apiKey:"AIzaSyCaDYOtTLe1iEMISjyohHSiTTkJ94mkGeg",authDomain:"echomind2-afcdb.firebaseapp.com",projectId:"echomind2-afcdb",storageBucket:"echomind2-afcdb.firebasestorage.app",messagingSenderId:"378106540923",appId:"1:378106540923:web:f9fe5d7cf1cf8827a343de"}),o=(0,s.xI)(n);(0,l.aU)(n)},7161:(e,t,r)=>{"use strict";r.d(t,{Ph:()=>l,Wq:()=>o,XL:()=>c,_h:()=>i,eg:()=>n});var a=r(6203),s=r(6104);let l=e=>(0,a.hg)(s.j,t=>{e(t)}),n=async(e,t)=>{try{if(!s.j.currentUser)throw Error("沒有登入的用戶");await (0,a.r7)(s.j.currentUser,{displayName:e,photoURL:t})}catch(e){throw console.error("更新用戶資料失敗:",e),e}},o=async(e,t)=>{try{return await (0,a.eJ)(s.j,e,t)}catch(e){throw console.error("電子郵件註冊失敗:",e),e}},i=async(e,t)=>{try{return await (0,a.x9)(s.j,e,t)}catch(e){throw console.error("電子郵件登入失敗:",e),e}},c=async()=>{try{let e=new a.HF;return await (0,a.df)(s.j,e)}catch(e){throw console.error("Google 登入失敗:",e),e}}},7585:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,5356,23)),Promise.resolve().then(r.bind(r,6671)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,1749)),Promise.resolve().then(r.bind(r,9015)),Promise.resolve().then(r.bind(r,4568))},9015:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>l});var a=r(5155);r(2115);var s=r(1362);function l(e){let{children:t,...r}=e;return(0,a.jsx)(s.N,{...r,children:t})}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(2596),s=r(9688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[444,992,888,40,874,998,441,684,358],()=>t(7585)),_N_E=e.O()}]);